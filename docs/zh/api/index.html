<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API 列表</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.7ed2c533.css" as="style"><link rel="preload" href="/assets/js/app.75368c75.js" as="script"><link rel="preload" href="/assets/js/2.d9775bb3.js" as="script"><link rel="preload" href="/assets/js/11.28fd37a4.js" as="script"><link rel="preload" href="/assets/js/3.d96f24cd.js" as="script"><link rel="prefetch" href="/assets/js/10.941eb833.js"><link rel="prefetch" href="/assets/js/12.9ed44bb1.js"><link rel="prefetch" href="/assets/js/13.5c3f7468.js"><link rel="prefetch" href="/assets/js/14.95ccd214.js"><link rel="prefetch" href="/assets/js/15.a971e9ed.js"><link rel="prefetch" href="/assets/js/16.555ca7d4.js"><link rel="prefetch" href="/assets/js/17.fef4b654.js"><link rel="prefetch" href="/assets/js/18.0d520fb2.js"><link rel="prefetch" href="/assets/js/19.76a64e27.js"><link rel="prefetch" href="/assets/js/4.b1a4afe5.js"><link rel="prefetch" href="/assets/js/5.79be2b59.js"><link rel="prefetch" href="/assets/js/6.0e17b22a.js"><link rel="prefetch" href="/assets/js/7.029c8c53.js"><link rel="prefetch" href="/assets/js/8.37e9996c.js"><link rel="prefetch" href="/assets/js/9.3db08c64.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7ed2c533.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>API 列表</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/zh/api/#ctx" class="sidebar-link">ctx</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#upload-input" class="sidebar-link">upload([input])</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#getconfig-name" class="sidebar-link">getConfig([name])</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#setconfig-config" class="sidebar-link">setConfig(config)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#saveconfig-config" class="sidebar-link">saveConfig(config)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#unsetconfig-key-propname" class="sidebar-link">unsetConfig(key, propName)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#removeconfig-key-propname" class="sidebar-link">removeConfig(key, propName)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#emit-event-message" class="sidebar-link">emit(event, [message])</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#on-event-callback" class="sidebar-link">on(event, [callback])</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#input" class="sidebar-link">input</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#output" class="sidebar-link">output</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#configpath" class="sidebar-link">configPath</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#basedir" class="sidebar-link">baseDir</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#helper" class="sidebar-link">helper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/zh/api/#helper-transformer" class="sidebar-link">helper.transformer</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#helper-uploader" class="sidebar-link">helper.uploader</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#helper-beforetransformplugins" class="sidebar-link">helper.beforeTransformPlugins</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#helper-beforeuploadplugins" class="sidebar-link">helper.beforeUploadPlugins</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#helper-afteruploadplugins" class="sidebar-link">helper.afterUploadPlugins</a></li></ul></li><li><a href="/docs/zh/api/#request-request" class="sidebar-link">Request.request</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/zh/api/#cmd" class="sidebar-link">cmd</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/zh/api/#cmd-program" class="sidebar-link">cmd.program</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#cmd-inquirer" class="sidebar-link">cmd.inquirer</a></li></ul></li><li><a href="/docs/zh/api/#log" class="sidebar-link">log</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/zh/api/#log-info-message" class="sidebar-link">log.info(message)</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#log-warn-message" class="sidebar-link">log.warn(message)</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#log-success-message" class="sidebar-link">log.success(message)</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#log-error-message" class="sidebar-link">log.error(message)</a></li></ul></li><li><a href="/docs/zh/api/#pluginhandler" class="sidebar-link">PluginHandler</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/zh/api/#pluginhandler-install-pluginname" class="sidebar-link">pluginHandler.install([...pluginName])</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#pluginhandler-uninstall-pluginname" class="sidebar-link">pluginHandler.uninstall([...pluginName])</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#pluginhandler-update-pluginname" class="sidebar-link">pluginHandler.update([...pluginName])</a></li></ul></li><li><a href="/docs/zh/api/#guiapi" class="sidebar-link">guiApi</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/zh/api/#guiapi-showinputbox-option" class="sidebar-link">guiApi.showInputBox([option])</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#showfileexplorer-option" class="sidebar-link">showFileExplorer([option])</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#upload-file" class="sidebar-link">upload([file])</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#shownotification-option" class="sidebar-link">showNotification(option)</a></li><li class="sidebar-sub-header"><a href="/docs/zh/api/#showmessagebox-option" class="sidebar-link">showMessageBox([option])</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="api-列表"><a href="#api-列表" class="header-anchor">#</a> API 列表</h1> <p>picgo 本身是一个流程系统应用。除了最关键的上传之外，picgo 还支持配置、log 输出、插件、命令行交互等等功能。</p> <h2 id="ctx"><a href="#ctx" class="header-anchor">#</a> ctx</h2> <p>picgo 传入插件的<code>ctx</code>其实就是 picgo 本身。<code>ctx</code>拥有 picgo 暴露的所有对象和方法。所以 picgo 本身拥有的方法，你在插件里使用的<code>ctx</code>也具备同样的方法。</p> <p>首先我们来初始化一个 picgo 实例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> PicGo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'picgo'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> picgo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PicGo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>接下去介绍 picgo 的详细 API。</p> <h2 id="upload-input"><a href="#upload-input" class="header-anchor">#</a> upload([input])</h2> <p>picgo 的上传函数。</p> <ul><li>input: Array&lt;any&gt; || <code>undefined</code></li></ul> <p>upload 接收两种情况：</p> <ul><li>空数组或者<code>undefined</code></li></ul> <p>当为空数组或者<code>undefined</code>的时候，picgo 将会上传剪贴板里的第一张图片（由于跨平台限制只能为 <strong><code>png</code></strong> 格式）。若剪贴板里不存在图片将会报错。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>Linux 平台需要安装<code>xclip</code></p></div> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// or</span>

picgo<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>非空数组</li></ul> <p>当为非空数组的时候，对应于 picgo 默认的两种 transformer，支持 path 数组以及 base64 图片信息数组。参考 <a href="/zh/dev-guide/cli.html#transformer">Transformer</a> 章节。</p> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/xxx/xxx.jpg'</span><span class="token punctuation">,</span> <span class="token string">'/yyy/yyy.png'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="getconfig-name"><a href="#getconfig-name" class="header-anchor">#</a> getConfig([name])</h2> <p>获取 picgo 的 config 信息。</p> <ul><li>name: string</li></ul> <p>默认的配置长这样：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;picBed&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;current&quot;</span><span class="token operator">:</span> <span class="token string">&quot;smms&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>你可以通过<code>getConfig()</code>获取完整信息：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>输出：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;picBed&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;current&quot;</span><span class="token operator">:</span> <span class="token string">&quot;smms&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>...<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>或者你可以选择你要查看的具体配置项：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token string">'picBed.current'</span><span class="token punctuation">)</span> <span class="token comment">// 支持多级查找</span>
</code></pre></div><p>输出：<code>smms</code>。</p> <h2 id="setconfig-config"><a href="#setconfig-config" class="header-anchor">#</a> setConfig(config)</h2> <p>配置 picgo 的 config 但不写入配置文件，用于上下文使用。</p> <ul><li>config: object</li></ul> <p>需要传入一个合法的对象去配置 picgo 的 config 信息。 <strong>这个方法不会写入配置文件</strong> ，一次流程执行结束后不会改变配置文件本身，却可以在流程过程中实现后续部件读取的配置。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>如果是 GUI 插件，setConfig 虽然不会写入配置文件，但是会一直保存在 config 上下文中，如果插件有重置的需求，请在合适的地方调用 <code>unsetConfig</code>（见下文） 来重置 config。</p></div> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">'picBed.current'</span><span class="token operator">:</span> <span class="token string">'gitlab'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="saveconfig-config"><a href="#saveconfig-config" class="header-anchor">#</a> saveConfig(config)</h2> <p>配置 picgo 的 config 并写入配置文件，用于持久化保存配置。</p> <ul><li>config: object</li></ul> <p>需要传入一个合法的对象去配置 picgo 的 config 信息。<strong>这个方法会写入配置文件</strong>，并影响之后每次 picgo 读取的配置文件。</p> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">saveConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">'picgo-plugin-test'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    xxx<span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span>
    yyy<span class="token operator">:</span> <span class="token string">'yyy'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="unsetconfig-key-propname"><a href="#unsetconfig-key-propname" class="header-anchor">#</a> unsetConfig(key, propName) <span class="badge tip" style="vertical-align:top;" data-v-6deb3b26>1.4.0+</span></h2> <p>删除 picgo 的 config 中的某个配置但不写入配置文件，用于上下文使用。</p> <ul><li>key: string</li> <li>propName: string</li></ul> <p>传入需要删除的字段来删除 picgo 的 config 信息。 <strong>这个方法不会写入配置文件</strong> ，一次流程执行结束后不会改变配置文件本身。</p> <p>示例：</p> <p>原始的 config：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;picgoPlugin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;picgo-plugin-xxx&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">unsetConfig</span><span class="token punctuation">(</span><span class="token string">'picgoPlugin'</span><span class="token punctuation">,</span> <span class="token string">'picgo-plugin-xxx'</span><span class="token punctuation">)</span>
</code></pre></div><p>unsetConfig 后的 config:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;picgoPlugin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="removeconfig-key-propname"><a href="#removeconfig-key-propname" class="header-anchor">#</a> removeConfig(key, propName) <span class="badge tip" style="vertical-align:top;" data-v-6deb3b26>1.4.0+</span></h2> <p>删除 picgo 的 config 中的某个配置并写入配置文件，用于持久化保存配置。</p> <ul><li>key: string</li> <li>propName: string</li></ul> <p>传入需要删除的字段来删除 picgo 的 config 信息。 <strong>这个方法会写入配置文件</strong> ，并影响之后每次 picgo 读取的配置文件。</p> <p>示例：</p> <p>原始的 config file：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;picgoPlugin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;picgo-plugin-xxx&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">removesetConfig</span><span class="token punctuation">(</span><span class="token string">'picgoPlugin'</span><span class="token punctuation">,</span> <span class="token string">'picgo-plugin-xxx'</span><span class="token punctuation">)</span>
</code></pre></div><p>removesetConfig 后的 config file:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;picgoPlugin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="emit-event-message"><a href="#emit-event-message" class="header-anchor">#</a> emit(event, [message])</h2> <p>事件派发。继承于 EventEmmitter。</p> <ul><li>event: string</li> <li>message: any</li></ul> <p>通过<code>emit</code>可以派发事件，再通过<code>on</code>方法监听。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>一个特殊的事件名是<code>notification</code>，picgo 以及一些插件将会使用这个事件名，详情可以查看 <a href="/zh/dev-guide/cli.html#消息通知">消息通知</a>章节。</p></div> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'xxx'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="on-event-callback"><a href="#on-event-callback" class="header-anchor">#</a> on(event, [callback])</h2> <p>事件监听。继承于 EventEmmitter。</p> <ul><li>event: string</li> <li>callback: function</li></ul> <p>通过<code>on</code>可以监听<code>emit</code>派发的事件。picgo 自带的事件可以参考 <a href="/zh/guide/use-in-node.html#事件监听">事件监听</a>一章。</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token parameter">message</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token comment">// { message: 'xxx' }</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="input"><a href="#input" class="header-anchor">#</a> input</h2> <ul><li>type: Array&lt;any&gt;</li></ul> <p>picgo 的输入。是一个数组。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picgo<span class="token punctuation">.</span>input<span class="token punctuation">)</span>
</code></pre></div><h2 id="output"><a href="#output" class="header-anchor">#</a> output</h2> <ul><li>type: Array&lt;any&gt;</li></ul> <p>picgo 的输出。是一个数组。通常上传成功之后要给这个数组里每一项加入<code>imgUrl</code>以及<code>url</code>项。可以参考 picgo 默认的 <a href="https://github.com/PicGo/PicGo-Core/blob/dev/src/plugins/uploader/smms.ts#L25-L37" target="_blank" rel="noopener noreferrer">smms<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Uploader。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>input 通过 Transformer 之后就会进入 output 数组中，而不是经过 Uploader 才会变成 output。</p></div> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picgo<span class="token punctuation">.</span>output<span class="token punctuation">)</span>
</code></pre></div><h2 id="configpath"><a href="#configpath" class="header-anchor">#</a> configPath</h2> <ul><li>type: string</li></ul> <p>picgo 的 config 所在路径。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picgo<span class="token punctuation">.</span>configPath<span class="token punctuation">)</span>
</code></pre></div><h2 id="basedir"><a href="#basedir" class="header-anchor">#</a> baseDir</h2> <ul><li>type: string</li></ul> <p>picgo 的 config 文件所在的文件夹路径。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picgo<span class="token punctuation">.</span>baseDir<span class="token punctuation">)</span>
</code></pre></div><h2 id="helper"><a href="#helper" class="header-anchor">#</a> helper</h2> <p>helper 是 picgo 的主要插件的集中管理者，包含 5 个部件，拥有相同的 api，不过所在生命周期不同，详情可见 <a href="/zh/dev-guide/cli.html">生命周期流程</a>。因此只介绍<code>helper.transformer</code>即可。</p> <h3 id="helper-transformer"><a href="#helper-transformer" class="header-anchor">#</a> helper.transformer</h3> <h4 id="register-id-plugin"><a href="#register-id-plugin" class="header-anchor">#</a> register(id, plugin)</h4> <ul><li>id: string</li> <li>plugin: object</li></ul> <p>如果你只是要开发一个简单的插件，而不是发布一个 npm 包的话（发布 picgo 的 npm 插件包请查看 <a href="/zh/dev-guide/cli.html">插件开发指南</a>），那么只需要调用<code>helper[module].register</code>方法即可。</p> <p>第一个参数代表插件的 id（相同的部件只能拥有唯一的 id，不过不同的部件可以拥有相同的 id），第二个参数应当是一个对象，至少包括一个<code>handle</code>方法供 picgo 调用。如果你还想要拥有 <a href="/zh/dev-guide/cli.html#配置项的处理">配置项</a>功能，可以考虑再加入<code>config</code>方法供 picgo 调用。</p> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>helper<span class="token punctuation">.</span>transformer<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ctx
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">config</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="helper-uploader"><a href="#helper-uploader" class="header-anchor">#</a> helper.uploader</h3> <p>同上。</p> <h3 id="helper-beforetransformplugins"><a href="#helper-beforetransformplugins" class="header-anchor">#</a> helper.beforeTransformPlugins</h3> <p>同上，不过不拥有配置项功能。</p> <h3 id="helper-beforeuploadplugins"><a href="#helper-beforeuploadplugins" class="header-anchor">#</a> helper.beforeUploadPlugins</h3> <p>同上，不过不拥有配置项功能。</p> <h3 id="helper-afteruploadplugins"><a href="#helper-afteruploadplugins" class="header-anchor">#</a> helper.afterUploadPlugins</h3> <p>同上，不过不拥有配置项功能。</p> <h2 id="request-request"><a href="#request-request" class="header-anchor">#</a> Request.request</h2> <p>Request.request 是 picgo 内部暴露的一个 <a href="https://github.com/request/request-promise-native" target="_blank" rel="noopener noreferrer">Request-Promise-Native<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 对象，拥有一个可以使用 <a href="https://github.com/request/request" target="_blank" rel="noopener noreferrer">request<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 库里的所有方法，并且返回的是原生的 Promise。</p> <div class="custom-block tip"><p class="custom-block-title">小贴士</p> <p>值得注意的是，使用这个对象来发送请求的话，能自动读取用户配置给 picgo 的 <code>proxy</code> 值。比较适合用于书写 Uploder 的核心部分。</p></div> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>Request<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
  uri<span class="token operator">:</span> <span class="token string">'xxxx'</span><span class="token punctuation">,</span>
  body<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'yyy'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="cmd"><a href="#cmd" class="header-anchor">#</a> cmd</h2> <p>用于提供 picgo 的命令行程序。</p> <h3 id="cmd-program"><a href="#cmd-program" class="header-anchor">#</a> cmd.program</h3> <p>用于注册 CLI 命令。实际上是一个 <a href="https://github.com/tj/commander.js/" target="_blank" rel="noopener noreferrer">commander.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的实例，用法和<code>commander.js</code>几乎一致。 <strong>不过请不要手动调用 picgo.cmd.program.parse(process.argv) 否则会导致出错</strong> 。参考 [注册命令](/zh/dev-guide/cli.html#注册 cli 命令)一章。</p> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>cmd<span class="token punctuation">.</span>program
  <span class="token punctuation">.</span><span class="token function">commands</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token string">'This is a test commands'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="cmd-inquirer"><a href="#cmd-inquirer" class="header-anchor">#</a> cmd.inquirer</h3> <p>用于提供 CLI 命令行交互。实际上是一个 <a href="https://github.com/SBoudrias/Inquirer.js/" target="_blank" rel="noopener noreferrer">inquirer.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的实例，用法和<code>inquirer.js</code>一致。参考 [配置项的处理](/zh/dev-guide/cli.html#配置项的处理）一章。通常 PicGo 内部会将其和插件的 [config](/zh/dev-guide/cli.html#config 方法)方法一起使用。</p> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">handleConfig</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> prompts <span class="token operator">=</span> <span class="token function">config</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
  <span class="token keyword">const</span> answer <span class="token operator">=</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span>cmd<span class="token punctuation">.</span>inquirer<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span>prompts<span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span><span class="token function">saveConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 调用 saveConfig 保存配置</span>
    <span class="token string">'picBed.xxx'</span><span class="token operator">:</span> answer
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>你可以通过这个工具来制作你自己的命令行交互。不过需要注意的是，通常你应该直接使用插件的 [config](/zh/dev-guide/cli.html#config 方法)方法来实现命令行交互，并且 PicGo 会自动存储<code>config</code>相关配置项的结果。</p></div> <h2 id="log"><a href="#log" class="header-anchor">#</a> log</h2> <p>用于在命令行输出漂亮的信息，给予用户提示。</p> <p>截图：</p> <p><img src="https://raw.githubusercontent.com/Molunerfinn/test/master/picgo/20180912153940.png" alt=""></p> <h3 id="log-info-message"><a href="#log-info-message" class="header-anchor">#</a> log.info(message)</h3> <ul><li>message: string</li></ul> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="log-warn-message"><a href="#log-warn-message" class="header-anchor">#</a> log.warn(message)</h3> <ul><li>message: string</li></ul> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="log-success-message"><a href="#log-success-message" class="header-anchor">#</a> log.success(message)</h3> <ul><li>message: string</li></ul> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="log-error-message"><a href="#log-error-message" class="header-anchor">#</a> log.error(message)</h3> <ul><li>message: string | error</li></ul> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="pluginhandler"><a href="#pluginhandler" class="header-anchor">#</a> PluginHandler <span class="badge tip" style="vertical-align:top;" data-v-6deb3b26>1.4.0+</span></h2> <p>提供了安装、更新、卸载 picgo 插件的底层接口。同时还暴露了对应的成功、失败事件用于开发者处理。</p> <h3 id="pluginhandler-install-pluginname"><a href="#pluginhandler-install-pluginname" class="header-anchor">#</a> pluginHandler.install([...pluginName])</h3> <p>用于安装插件，接收一个数组作为参数。其中 <code>pluginName</code> 不包括 <code>picgo-plugin-</code> 的前缀。比如一个叫做 <code>plugin-plugin-xxx</code> 的插件， <code>pluginName</code> 为 <code>xxx</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>pluginHandler<span class="token punctuation">.</span><span class="token function">install</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'xxx'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
picgo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'installSuccess'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// ['picgo-plugin-xxx']</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
picgo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'installFailed'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="pluginhandler-uninstall-pluginname"><a href="#pluginhandler-uninstall-pluginname" class="header-anchor">#</a> pluginHandler.uninstall([...pluginName])</h3> <p>用于安装插件，接收一个数组作为参数。其中 <code>pluginName</code> 不包括 <code>picgo-plugin-</code> 的前缀。比如一个叫做 <code>plugin-plugin-xxx</code> 的插件， <code>pluginName</code> 为 <code>xxx</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>pluginHandler<span class="token punctuation">.</span><span class="token function">uninstall</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'xxx'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
picgo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'uninstallSuccess'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// ['picgo-plugin-xxx']</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
picgo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'uninstallFailed'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="pluginhandler-update-pluginname"><a href="#pluginhandler-update-pluginname" class="header-anchor">#</a> pluginHandler.update([...pluginName])</h3> <p>用于安装插件，接收一个数组作为参数。其中 <code>pluginName</code> 不包括 <code>picgo-plugin-</code> 的前缀。比如一个叫做 <code>plugin-plugin-xxx</code> 的插件， <code>pluginName</code> 为 <code>xxx</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>pluginHandler<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'xxx'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
picgo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'updateSuccess'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// ['picgo-plugin-xxx']</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
picgo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'updateFailed'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="guiapi"><a href="#guiapi" class="header-anchor">#</a> guiApi</h2> <p><strong>guiApi 仅在 electron 版本的 PicGo 里提供，详细信息可以参考 <a href="/zh/dev-guide/gui.html">GUI 插件开发一章</a>。</strong></p> <h3 id="guiapi-showinputbox-option"><a href="#guiapi-showinputbox-option" class="header-anchor">#</a> guiApi.showInputBox([option])</h3> <p>调用之后打开一个输入弹窗，可以用于接受用户输入。</p> <ul><li>option: Object || <code>undefined</code></li> <li>return: 返回一个 Promise 对象，resolve 的值是用户输入的结果。</li></ul> <p>其中 option 是可选值，可以传入一个<code>{title, placeholder}</code>的对象，用于弹窗的标题和输入框的<code>placeholder</code>显示。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">guiMenu</span> <span class="token operator">=</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      label<span class="token operator">:</span> <span class="token string">'打开 InputBox'</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> guiApi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">await</span> guiApi<span class="token punctuation">.</span><span class="token function">showInputBox</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          title<span class="token operator">:</span> <span class="token string">'打开对话框'</span><span class="token punctuation">,</span>
          placeholder<span class="token operator">:</span> <span class="token string">'请输入文件地址'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="showfileexplorer-option"><a href="#showfileexplorer-option" class="header-anchor">#</a> showFileExplorer([option])</h3> <p>调用之后打开一个文件浏览器，可以得到用户选择的文件（夹）路径。</p> <ul><li>option: Object || <code>undefined</code></li> <li>return: 返回一个 Promise 对象，resolve 的值是用户选择的文件路径数组。</li></ul> <p>其中 option 是可选值，可以传入一个合法的 electron 的 dialog 的 <a href="https://electronjs.org/docs/api/dialog#dialogshowopendialogbrowserwindow-options-callback" target="_blank" rel="noopener noreferrer">options 对象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，用于指定是否可多选，用于选择文件还是文件夹等等。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">guiMenu</span> <span class="token operator">=</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      label<span class="token operator">:</span> <span class="token string">'打开文件浏览器'</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> guiApi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> guiApi<span class="token punctuation">.</span><span class="token function">showFileExplorer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          properties<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'openFile'</span><span class="token punctuation">,</span> <span class="token string">'multiSelections'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="upload-file"><a href="#upload-file" class="header-anchor">#</a> upload([file])</h3> <p>调用之后使用 PicGo 底层来上传，可以实现自动更新相册图片、上传成功后自动将 URL 写入剪贴板。</p> <ul><li>file: Array || <code>undefined</code></li> <li>return: 返回一个 Promise 对象，resolve 的值是 PicGo 上传成功后的 output 值，是一个数组。所以推荐用<code>async await</code>获取。</li></ul> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>实际上如果通过上面的<code>showInputBox</code>获得输入项，或者<code>showFileExplorer</code>选中文件，再通过<code>upload</code>上传的话，也可以很好的达到上传的目的。
推荐还是书写 Uploader 或者 Transformer 等插件，来实现接管 PicGo 的上传流程。</p></div> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">guiMenu</span> <span class="token operator">=</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      label<span class="token operator">:</span> <span class="token string">'独立上传'</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> guiApi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> guiApi<span class="token punctuation">.</span><span class="token function">showFileExplorer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          properties<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'openFile'</span><span class="token punctuation">,</span> <span class="token string">'multiSelections'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        guiApi<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="shownotification-option"><a href="#shownotification-option" class="header-anchor">#</a> showNotification(option) <span class="badge tip" style="vertical-align:top;" data-v-6deb3b26>2.0.1+</span></h3> <p>调用之后弹出系统通知窗口。</p> <ul><li>option: Object || <code>undefined</code></li> <li>return: undefined（无返回值）</li></ul> <p>其中 option 是必选值，需要提供<code>{title, body}</code>用于通知窗口的显示。</p> <p><img src="https://cdn.jsdelivr.net/gh/Molunerfinn/test@master/picgo-doc/5c3db88042a0f.png" alt=""></p> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">guiMenu</span> <span class="token operator">=</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      label<span class="token operator">:</span> <span class="token string">'显示通知'</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> guiApi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        guiApi<span class="token punctuation">.</span><span class="token function">showNotification</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          title<span class="token operator">:</span> <span class="token string">'提示'</span><span class="token punctuation">,</span>
          body<span class="token operator">:</span> <span class="token string">'本提示来自插件'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="showmessagebox-option"><a href="#showmessagebox-option" class="header-anchor">#</a> showMessageBox([option]) <span class="badge tip" style="vertical-align:top;" data-v-6deb3b26>2.1.0+</span></h3> <p>调用之后弹出系统的对话框窗口。</p> <ul><li>option: Object || <code>{title: '', message: '', type: 'info', buttons: ['Yes', 'No']}</code></li> <li>return: Object -&gt; <code>{result, checkboxChecked}</code></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/Molunerfinn/test@master/picgo/20190611110904.png" alt=""></p> <p>其中，option 的完整参数可以参考 Electron 的 <a href="https://electronjs.org/docs/api/dialog#dialogshowmessageboxbrowserwindow-options-callback" target="_blank" rel="noopener noreferrer">dialog.showMessageBox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。返回的值里，<code>result</code>为你指定的 buttons 的 index 值。比如上图如果我点了<code>是 (Y)</code>, 那么我会收到如下返回值：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  result<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  checkboxChecked<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 如果你在 options 里指定了 checkboxLabel 则会出现一个 checkbox，如果不提供，默认返回 false</span>
<span class="token punctuation">}</span>
</code></pre></div><p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">guiMenu</span> <span class="token operator">=</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      label<span class="token operator">:</span> <span class="token string">'显示 MessageBox'</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> guiApi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> guiApi<span class="token punctuation">.</span><span class="token function">showMessageBox</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          title<span class="token operator">:</span> <span class="token string">'这是 title'</span><span class="token punctuation">,</span>
          message<span class="token operator">:</span> <span class="token string">'这是 message'</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">'info'</span><span class="token punctuation">,</span>
          buttons<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Yes'</span><span class="token punctuation">,</span> <span class="token string">'No'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// { result: 0, checkboxChecked: false }</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.75368c75.js" defer></script><script src="/assets/js/2.d9775bb3.js" defer></script><script src="/assets/js/11.28fd37a4.js" defer></script><script src="/assets/js/3.d96f24cd.js" defer></script>
  </body>
</html>
